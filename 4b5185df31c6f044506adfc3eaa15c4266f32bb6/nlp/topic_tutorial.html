<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Topic Prediction API Tutorial &mdash; Seasalt.ai Developers 0.0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Action Extraction API Tutorial" href="action_tutorial.html" />
    <link rel="prev" title="Summarization API Tutorial" href="sum_tutorial.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >
            <a href="../index.html" class="icon icon-home"> Seasalt.ai Developers
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Product Introductions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../product_introduction/seax.html">SeaX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../product_introduction/seavoice.html">SeaVoice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaChat</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../seachat/quickstart.html">SeaChat Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/bot_tutorial.html">SeaChat Bot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/policy.html">SeaChat Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/faq.html">SeaChat FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaChat-cart</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cart/readme.html">SeaChat Cart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cart/seachat_cart.html">Technical Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaWord</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">SeaWord</a></li>
<li class="toctree-l1"><a class="reference internal" href="sum_tutorial.html">Summarization API Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Topic Prediction API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="action_tutorial.html">Action Extraction API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="xlingualNER_tutorial.html">Cross Lingual NER API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="mr_tutorial.html">Machine Reading API Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaVoice (Seasalt speech)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../speech/readme.html">SeaVoice README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech/seavoice_sdk_python_tutorial.html">SeaVoice SDK (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech/seavoice_restful_apis_tutorial.html">SeaVoice RESTful APIs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NearMe</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nearme/readme.html">NearMe README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nearme/data_analytics_tutorial.html">NearMe Data Analytics Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaChat-report</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../report/index.html">Welcome to SeaChat-report’s documentation!</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Seasalt.ai Developers</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Topic Prediction API Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/nlp/topic_tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="topic-prediction-api-tutorial">
<span id="topic-tutorial"></span><h1>Topic Prediction API Tutorial<a class="headerlink" href="#topic-prediction-api-tutorial" title="Permalink to this headline"></a></h1>
<p>This tutorial will walk through how to use the Topic Extraction API for meeting analytics.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#multilingual-support" id="id1">Multilingual Support</a></p></li>
<li><p><a class="reference internal" href="#topic-extraction" id="id2">Topic Extraction</a></p>
<ul>
<li><p><a class="reference internal" href="#post-extract" id="id3">POST /extract</a></p></li>
<li><p><a class="reference internal" href="#post-extract-no-callback" id="id4">POST /extract_no_callback</a></p></li>
<li><p><a class="reference internal" href="#post-extract-live" id="id5">POST /extract_live</a></p></li>
</ul>
</li>
</ul>
</div>
<p>The deployed version of the topic extraction API is hosted at <code class="docutils literal notranslate"><span class="pre">https://seachat-backstage.seasalt.ai/topics</span></code>.</p>
<p>All of the following API calls can be viewed and tested with the <a class="reference external" href="https://seachat-backstage.seasalt.ai/topics/docs#/">Swagger docs</a> for this API.</p>
<p>The current topic extraction models are stored in the Azure fileshare at <code class="docutils literal notranslate"><span class="pre">/mnt/models/nlp/topic_extraction</span></code>.</p>
<section id="multilingual-support">
<h2><a class="toc-backref" href="#id1">Multilingual Support</a><a class="headerlink" href="#multilingual-support" title="Permalink to this headline"></a></h2>
<p>By default, the Topic Extraction API will extract topics in English. The Topic Extraction API currently supports the following languages: English, Traditional Chinese, Simplified Chinese, Indonesian, Javanese, Malay, Tagalog, and Vietnamese.</p>
<p>All API calls for each language include a language code in the URL.</p>
<p>The language codes for supported languages are the following:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 80%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Language</p></th>
<th class="head"><p>Code</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>English</p></td>
<td><p>en-XX</p></td>
</tr>
<tr class="row-odd"><td><p>Traditional Chinese</p></td>
<td><p>zh-TW</p></td>
</tr>
<tr class="row-even"><td><p>Simplified Chinese</p></td>
<td><p>zh-CN</p></td>
</tr>
<tr class="row-odd"><td><p>Indonesian</p></td>
<td><p>id-XX</p></td>
</tr>
<tr class="row-even"><td><p>Javanese</p></td>
<td><p>jv-XX</p></td>
</tr>
<tr class="row-odd"><td><p>Malay</p></td>
<td><p>ms-XX</p></td>
</tr>
<tr class="row-even"><td><p>Tagalog</p></td>
<td><p>tl-XX</p></td>
</tr>
<tr class="row-odd"><td><p>Vietnamese</p></td>
<td><p>vi-XX</p></td>
</tr>
</tbody>
</table>
</section>
<section id="topic-extraction">
<h2><a class="toc-backref" href="#id2">Topic Extraction</a><a class="headerlink" href="#topic-extraction" title="Permalink to this headline"></a></h2>
<p>The topic extraction task uses a combination of abstractive and extractive approaches. Abstractive refers to a text classification approach, where each input is classified into a set of labels seen during training. Extractive refers to a keyphrase search approach where relevant keyphrases are returned as topics.</p>
<section id="post-extract">
<h3><a class="toc-backref" href="#id3">POST /extract</a><a class="headerlink" href="#post-extract" title="Permalink to this headline"></a></h3>
<p>To get the topics for an input, the process is called with a POST request to the <code class="docutils literal notranslate"><span class="pre">extract</span></code> endpoint:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>POST https://seachat-backstage.seasalt.ai/topics/<span class="o">{</span>lang_code<span class="o">}</span>/extract
</pre></div>
</div>
<p>This request takes a path parameter <code class="docutils literal notranslate"><span class="pre">{lang_code}</span></code>. Your choice of language code from the table above replaces the curly braces. By default, the language code is set to <code class="docutils literal notranslate"><span class="pre">en-US</span></code>.</p>
<p>The required request body for topic extraction is as follows:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;sequence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;transcription&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;wav_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;anchor_start&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;verified_transcription&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;is_verified&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;summarization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The COVID-19 pandemic, also known as the coronavirus pandemic, is an ongoing global pandemic of coronavirus disease 2019 (COVID-19) caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2).&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;trans_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;speaker&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;string&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://127.0.0.0&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The reason for having such a verbose request body is to maintain consistency between the input provided from the backend. Note that we have a value each for the <code class="docutils literal notranslate"><span class="pre">&quot;summarization&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;url&quot;</span></code> fields. Other fields are set to default.</p>
</div>
<p>We populate the <code class="docutils literal notranslate"><span class="pre">&quot;summarization&quot;</span></code> field, not <code class="docutils literal notranslate"><span class="pre">&quot;transcription&quot;</span></code>, which may be unintuitive. The reason for doing this is because the topic extraction approach relies on summarization of meeting transcript to ensure well-formedness. The topic extraction models are trained on well-formed input (coherent utterances). Speech-to-text may result in noisy input, so we strive to provide a sanitized input to the topic extraction API as much as possible.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">url</span></code> field is where callback URL is specified. This URL is used when the API is ready to send its output to the person who submitted a topic extraction request.</p>
<p>A successful response will return the following message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span><span class="s1">&#39;message&#39;</span>: <span class="s1">&#39;Topic extraction process started.&#39;</span><span class="o">}</span>
</pre></div>
</div>
<p>The output of topic extraction is sent to the front end where users will be able to see the topics in the user interface.</p>
<p>To test that callback is working properly, start the callback API by running the following command in <code class="docutils literal notranslate"><span class="pre">SeaWord/topic_extraction/routers</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uvicorn callback_test:callback_test --port <span class="m">8888</span>
</pre></div>
</div>
<p>In another terminal, start the topic extraction API by running the following command in <code class="docutils literal notranslate"><span class="pre">SeaWord/topic_extraction</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uvicorn main:app --port <span class="m">5003</span> --host <span class="m">0</span>.0.0.0
</pre></div>
</div>
<p>It will take some time for the models to load. Once the application startup is complete, you’ll see the following message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>INFO:     Application startup complete.
</pre></div>
</div>
<p>Send a request using a curl request as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -X POST http://0.0.0.0:5003/en-US/extract -H <span class="s1">&#39;Content-Type: application/json&#39;</span> -d <span class="s1">&#39;{</span>
<span class="s1">    &quot;url&quot;: &quot;http://127.0.0.1:8888&quot;,</span>
<span class="s1">    &quot;data&quot;: [{&quot;summarization&quot;: &quot;The COVID-19 pandemic, also known as the coronavirus pandemic, is an ongoing global pandemic of coronavirus disease 2019 (COVID-19) caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2).&quot;,</span>
<span class="s1">              &quot;transcription&quot;: &quot;string&quot;</span>
<span class="s1">             }</span>
<span class="s1">            ]</span>
<span class="s1">}&#39;</span>
</pre></div>
</div>
<p>You can modify the <code class="docutils literal notranslate"><span class="pre">&quot;summarization&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;transcription&quot;</span></code> fields, but they cannot be empty. The value of the <code class="docutils literal notranslate"><span class="pre">&quot;summarization&quot;</span></code> field will be the input to topic extraction, so make sure the input you want to test is placed in <code class="docutils literal notranslate"><span class="pre">&quot;summarization&quot;</span></code>. You can also change the language code in <code class="docutils literal notranslate"><span class="pre">http://0.0.0.0:5003/extract/en-US</span></code>. Notice that the <code class="docutils literal notranslate"><span class="pre">&quot;url&quot;</span></code> field is set to the port specified when you start the callback API.</p>
<p>If the process is successful, the following logs will appear in the same terminal as the one you used to start the topic extraction API:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:15,567 <span class="p">|</span> topic_api.py:start_topic_extraction_process <span class="p">|</span> Extraction task added to queue.
INFO: <span class="m">127</span>.0.0.1:38702 - <span class="s2">&quot;POST /en-US/extract HTTP/1.1&quot;</span> <span class="m">202</span> Accepted
INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:15,570 <span class="p">|</span> topic_api.py:topic_predict_callback <span class="p">|</span> Sending callback request to http://127.0.0.1:8888
INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:15,570 <span class="p">|</span> topic_api.py:extract <span class="p">|</span> Language code: en-XX
INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:15,570 <span class="p">|</span> topic_api.py:extract <span class="p">|</span> Extracting topics
INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:15,639 <span class="p">|</span> topic_api.py:extract <span class="p">|</span> Predictions from fastText: <span class="o">[</span><span class="s1">&#39;london&#39;</span>, <span class="s1">&#39;sanfrancisco&#39;</span>, <span class="s1">&#39;unitedstates&#39;</span>, <span class="s1">&#39;usa&#39;</span>, <span class="s1">&#39;berlin&#39;</span>, <span class="s1">&#39;BusinessPerson&#39;</span>, <span class="s1">&#39;Theatre&#39;</span>, <span class="s1">&#39;Weapon&#39;</span>, <span class="s1">&#39;Outbreak&#39;</span><span class="o">]</span>
INFO:fastapi:Predictions from fastText: <span class="o">[</span><span class="s1">&#39;london&#39;</span>, <span class="s1">&#39;sanfrancisco&#39;</span>, <span class="s1">&#39;unitedstates&#39;</span>, <span class="s1">&#39;usa&#39;</span>, <span class="s1">&#39;berlin&#39;</span>, <span class="s1">&#39;BusinessPerson&#39;</span>, <span class="s1">&#39;Theatre&#39;</span>, <span class="s1">&#39;Weapon&#39;</span>, <span class="s1">&#39;Outbreak&#39;</span><span class="o">]</span>
/home/vsoesanto/anaconda/lib/python3.8/site-packages/torch/distributions/distribution.py:44: UserWarning: &lt;class <span class="s1">&#39;torch_struct.distributions.TreeCRF&#39;</span>&gt; does not define arg_constraints. Please <span class="nb">set</span> <span class="nv">arg_constraints</span> <span class="o">=</span> <span class="o">{}</span> or initialize the distribution with <span class="nv">validate_args</span><span class="o">=</span>False to turn off validation.
warnings.warn<span class="o">(</span>f<span class="s1">&#39;{self.class} does not define arg_constraints. &#39;</span> +
INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:15,804 <span class="p">|</span> topic_api.py:extract <span class="p">|</span> Predictions from RAKE: <span class="o">[</span><span class="s1">&#39;coronavirus disease 2019&#39;</span>, <span class="s1">&#39;ongoing global pandemic&#39;</span>, <span class="s1">&#39;coronavirus pandemic&#39;</span><span class="o">]</span>
INFO:fastapi:Predictions from RAKE: <span class="o">[</span><span class="s1">&#39;coronavirus disease 2019&#39;</span>, <span class="s1">&#39;ongoing global pandemic&#39;</span>, <span class="s1">&#39;coronavirus pandemic&#39;</span><span class="o">]</span>
INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:16,081 <span class="p">|</span> topic_api.py:extract <span class="p">|</span> Predictions from KeyBERT: <span class="o">[</span><span class="s1">&#39;coronavirus pandemic&#39;</span>, <span class="s1">&#39;coronavirus disease&#39;</span><span class="o">]</span>
INFO:fastapi:Predictions from KeyBERT: <span class="o">[</span><span class="s1">&#39;coronavirus pandemic&#39;</span>, <span class="s1">&#39;coronavirus disease&#39;</span><span class="o">]</span>
INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:16,082 <span class="p">|</span> topic_api.py:extract <span class="p">|</span> Final predictions: <span class="o">[</span><span class="s1">&#39;london&#39;</span>, <span class="s1">&#39;sanfrancisco&#39;</span>, <span class="s1">&#39;unitedstates&#39;</span>, <span class="s1">&#39;usa&#39;</span>, <span class="s1">&#39;berlin&#39;</span>, <span class="s1">&#39;BusinessPerson&#39;</span>, <span class="s1">&#39;Theatre&#39;</span>, <span class="s1">&#39;Weapon&#39;</span>, <span class="s1">&#39;Outbreak&#39;</span>, <span class="s1">&#39;coronavirus pandemic&#39;</span>, <span class="s1">&#39;coronavirus disease&#39;</span>, <span class="s1">&#39;coronavirus disease 2019&#39;</span>, <span class="s1">&#39;ongoing global pandemic&#39;</span>, <span class="s1">&#39;coronavirus pandemic&#39;</span><span class="o">]</span>
INFO:fastapi:Final predictions: <span class="o">[</span><span class="s1">&#39;london&#39;</span>, <span class="s1">&#39;sanfrancisco&#39;</span>, <span class="s1">&#39;unitedstates&#39;</span>, <span class="s1">&#39;usa&#39;</span>, <span class="s1">&#39;berlin&#39;</span>, <span class="s1">&#39;BusinessPerson&#39;</span>, <span class="s1">&#39;Theatre&#39;</span>, <span class="s1">&#39;Weapon&#39;</span>, <span class="s1">&#39;Outbreak&#39;</span>, <span class="s1">&#39;coronavirus pandemic&#39;</span>, <span class="s1">&#39;coronavirus disease&#39;</span>, <span class="s1">&#39;coronavirus disease 2019&#39;</span>, <span class="s1">&#39;ongoing global pandemic&#39;</span>, <span class="s1">&#39;coronavirus pandemic&#39;</span><span class="o">]</span>
INFO: <span class="p">|</span> <span class="m">2021</span>-05-26 <span class="m">19</span>:58:16,109 <span class="p">|</span> topic_api.py:topic_predict_callback <span class="p">|</span> Callback succeeded. Code: <span class="m">200</span>
INFO:fastapi:Callback succeeded. Code: <span class="m">200</span>
</pre></div>
</div>
<p>In addition, there should be a file <code class="docutils literal notranslate"><span class="pre">results.json</span></code> in <code class="docutils literal notranslate"><span class="pre">SeaWord/topic_extraction/routers</span></code> that contains the response from topic extraction.</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">extract</span></code> endpoint, we do not have to wait for topic extraction results when we send a request. We let the API process the input without having to worry about the request timing out. Once all the data is processed, the API sends its own request to the callback URL that it was given in the original request (i.e. it sends a request back to us with the topic extraction results)</p>
<p>On the other hand, when using the <code class="docutils literal notranslate"><span class="pre">demo</span></code> endpoint, we have to wait for topic extraction to generate results. See below for instructions on using the <code class="docutils literal notranslate"><span class="pre">demo</span></code> endpoint.</p>
</section>
<section id="post-extract-no-callback">
<h3><a class="toc-backref" href="#id4">POST /extract_no_callback</a><a class="headerlink" href="#post-extract-no-callback" title="Permalink to this headline"></a></h3>
<p>In order to see the full topics returned without accesing the ngMeeting user interface, we send a POST request to the <code class="docutils literal notranslate"><span class="pre">extract_no_callback</span></code> endpoint:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>POST https://seachat-backstage.seasalt.ai/topics/<span class="o">{</span>lang_code<span class="o">}</span>/extract_no_callback
</pre></div>
</div>
<p>Similarly, the choice of language code from the table above replaces the curly braces. By default, the language code is set to <code class="docutils literal notranslate"><span class="pre">en-US</span></code>.</p>
<p>The required request body for topic extraction is the same as shown above. For completion, it is as follows:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;sequence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;transcription&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;wav_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;anchor_start&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;verified_transcription&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;is_verified&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;summarization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The COVID-19 pandemic, also known as the coronavirus pandemic, is an ongoing global pandemic of coronavirus disease 2019 (COVID-19) caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2).&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;trans_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;speaker&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;string&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://127.0.0.0&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>A successful response will have the following output:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;RAKE&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;keywords&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;coronavirus disease 2019&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ongoing global pandemic&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;coronavirus pandemic&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;BERT&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;keywords&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;coronavirus pandemic&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;coronavirus disease&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;topics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;transcript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The COVID-19 pandemic, also known as the coronavirus pandemic, is an ongoing global pandemic of coronavirus disease 2019 (COVID-19) caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2).&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;topics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;sanfrancisco&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;usa&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;london&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;berlin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;australia&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;BusinessPerson&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Weapon&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;Outbreak&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;coronavirus pandemic&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;coronavirus disease&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;coronavirus disease 2019&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ongoing global pandemic&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;coronavirus pandemic&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="post-extract-live">
<h3><a class="toc-backref" href="#id5">POST /extract_live</a><a class="headerlink" href="#post-extract-live" title="Permalink to this headline"></a></h3>
<p>In cases where we want to get live results and process a transcript piece by piece, we can use the <code class="docutils literal notranslate"><span class="pre">/extract_live</span></code> endpoint.
Instead of an entire meeting transcript, this endpoint accepts a single transcription segment in the following format:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span>{
    &quot;command&quot;: Text,
    &quot;meeting_id&quot;: Text,
    &quot;sequence&quot;: int,
    &quot;account_id&quot;: Text,
    &quot;timestamp&quot;: Text,
    &quot;speaker&quot;: Text,
    &quot;transcription&quot;: Text,
    &quot;voice_start_time&quot;: float,
    &quot;voice_duration&quot;: float,
    &quot;type&quot;: Text,
    &quot;callback_url&quot;: HttpUrl
}
</pre></div>
</div>
<p>The topic extraction process will be performed on the segment and the resulting topics for each segment will be cached.
If the topic extraction system predicts a unique topic for the transcript (ie. it predicts a topic for the first time on a specific meeting transcript),
the API will send a callback containing the new topics in the following format:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span>{
    &quot;meeting_id&quot;: Text,
    &quot;sequence&quot;: int,
    &quot;account_id&quot;: Text,
    &quot;topics&quot;: List[Keywords]
}
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sum_tutorial.html" class="btn btn-neutral float-left" title="Summarization API Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="action_tutorial.html" class="btn btn-neutral float-right" title="Action Extraction API Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2021, Seasalt.ai.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-10405841-8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-10405841-8', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>