<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NearMe Bot Generation &mdash; Seasalt.ai Developers 0.0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NearMe Bot Message Routing" href="nearme_bot_message_routing.html" />
    <link rel="prev" title="NearMe Bot Architecture &amp; Deployment" href="nearme_bot_architecture.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >
            <a href="../index.html" class="icon icon-home"> Seasalt.ai Developers
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Product Introductions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../product_introduction/seax.html">SeaX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../product_introduction/seavoice.html">SeaVoice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaChat</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../seachat/quickstart.html">SeaChat Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/bot_tutorial.html">SeaChat Bot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/policy.html">SeaChat Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/faq.html">SeaChat FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaChat-cart</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cart/readme.html">SeaChat Cart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cart/seachat_cart.html">Technical Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaWord</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nlp/readme.html">SeaWord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/sum_tutorial.html">Summarization API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/topic_tutorial.html">Topic Extraction API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/action_tutorial.html">Action Extraction API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/xlingualNER_tutorial.html">Cross Lingual NER API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/mr_tutorial.html">Machine Reading API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/affect_tutorial.html">Affect Detection API Tutoral</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/redaction_tutorial.html">Redaction Service Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaVoice (Seasalt speech)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../speech/readme.html">SeaVoice README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech/seavoice_sdk_python_tutorial.html">SeaVoice SDK (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech/seavoice_restful_apis_tutorial.html">SeaVoice RESTful APIs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NearMe</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">NearMe</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearme_bot_architecture.html">NearMe Bot Architecture</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NearMe Bot Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearme_bot_message_routing.html">NearMe Message Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearme_bot_analytics.html">NearMe Conversation Analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_analytics_tutorial.html">NearMe Data Studio Analytics Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SeaChat-report</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../report/index.html">Welcome to SeaChat-report’s documentation!</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Seasalt.ai Developers</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>NearMe Bot Generation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/nearme/nearme_bot_generation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nearme-bot-generation">
<span id="id1"></span><h1>NearMe Bot Generation<a class="headerlink" href="#nearme-bot-generation" title="Permalink to this headline"></a></h1>
<p>This page will walk through how bots are generated through the NearMe website and which NLP services are called on the backend.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#bot-generation" id="id2">Bot Generation</a></p>
<ul>
<li><p><a class="reference internal" href="#data-storage" id="id3">Data Storage</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="bot-generation">
<h2><a class="toc-backref" href="#id2">Bot Generation</a><a class="headerlink" href="#bot-generation" title="Permalink to this headline"></a></h2>
<p>When a new bot is created for the first time via the NearMe site, the following steps are executed on the backend:</p>
<ol class="arabic simple">
<li><p>If it’s a custom location: Find the business’ Google Maps page and run the scraper to get the basic business info, reviews, hours, location, attributes, etc.</p></li>
<li><p>If it’s a GBP authorized location: Use the Google Business Profile API to get all business info, reviews, hours, location, attributes, etc.</p></li>
<li><p>Store all business info in the backend DB (<code class="docutils literal notranslate"><span class="pre">ngchat-dev</span></code>, <code class="docutils literal notranslate"><span class="pre">ngchat-staging</span></code>, <code class="docutils literal notranslate"><span class="pre">ngchat-production</span></code>)</p></li>
<li><p>Create a brand and agent using the GBM APIs</p></li>
</ol>
<p>Once these intial setup steps are completed, the user can go to the <code class="docutils literal notranslate"><span class="pre">Local</span> <span class="pre">Testing</span></code> tab and click the <code class="docutils literal notranslate"><span class="pre">Build</span></code> button.
This will send a POST request to the NLP Bot Generation API at <code class="docutils literal notranslate"><span class="pre">https://seachat.seasalt.ai/bot-actions/nearme_bots</span></code>.
The NLP server will then register the business information to the <code class="docutils literal notranslate"><span class="pre">nearme_bots</span></code> table in the NLP database (<code class="docutils literal notranslate"><span class="pre">nlp-{namespace}</span></code>), generate FAQs based on the business attributes, and inject the FAQs, Reviews, and Additional Context into the appropriate ElasticSearch indices.
The final important step is that an entry will also be added to the <code class="docutils literal notranslate"><span class="pre">agent_deployment_env</span></code> table in the <code class="docutils literal notranslate"><span class="pre">gbm_agent_env</span></code> database.
This table associates a particular GBM agent with a bot in the appropriate deployment environment to ensure proper routing of incoming messages.
More on that in the Bot Routing section.</p>
<a class="reference internal image-reference" href="../_images/bot_generation.png"><img alt="../_images/bot_generation.png" src="../_images/bot_generation.png" style="width: 800px;" /></a>
<p>Once the NLP server is done, the user can immediately scan the QR code on the screen to talk to the bot.
Additionally, the build process will also trigger the endpoint POST <code class="docutils literal notranslate"><span class="pre">https://seachat.seasalt.ai/bot-actions/nearme_bots/{bot_id}/flyer</span></code>, which will create a customized marketing flyer for our team to use when approaching the business.</p>
<p>For more detailed information about the endpoints used, refer to the swagger docs: <a class="reference external" href="https://seachat.seasalt.ai/bot-actions/docs">https://seachat.seasalt.ai/bot-actions/docs</a></p>
<section id="data-storage">
<h3><a class="toc-backref" href="#id3">Data Storage</a><a class="headerlink" href="#data-storage" title="Permalink to this headline"></a></h3>
<p>The NLP team maintains separate DBs from the backend team for all of the bot data that is necessary to keep the bots running.
At bot generation time, we store important business &amp; bot data to the <code class="docutils literal notranslate"><span class="pre">nlp-dev</span></code>, <code class="docutils literal notranslate"><span class="pre">nlp-staging</span></code>, or <code class="docutils literal notranslate"><span class="pre">nlp-production</span></code> database in the <code class="docutils literal notranslate"><span class="pre">nearme_bots</span></code> table.
The table has the following format:</p>
<p><strong>nearme_bots</strong></p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 9%" />
<col style="width: 45%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>int</p></td>
<td><p>A unique ID for the bot</p></td>
<td><p>“123”</p></td>
</tr>
<tr class="row-odd"><td><p>business_name</p></td>
<td><p>str</p></td>
<td><p>The business name</p></td>
<td><p>SeaTech Ltd.</p></td>
</tr>
<tr class="row-even"><td><p>bot_name</p></td>
<td><p>str</p></td>
<td><p>The formatted bot name</p></td>
<td><p>seatech-ltd</p></td>
</tr>
<tr class="row-odd"><td><p>bot_id</p></td>
<td><p>str</p></td>
<td><p>The unique bot ID assigned by the backend API</p></td>
<td><p>91b7d5b9-d071-4da9-ab7d-8302eed441f6</p></td>
</tr>
<tr class="row-even"><td><p>version</p></td>
<td><p>str</p></td>
<td><p>The deployment version: sandbox or public</p></td>
<td><p>public</p></td>
</tr>
<tr class="row-odd"><td><p>faq_index</p></td>
<td><p>str</p></td>
<td><p>The ES index for the bot’s FAQs</p></td>
<td><p>seatech-ltd-91b7d5b9-d071-4da9-ab7d-8302eed441f6-dev-public-faq</p></td>
</tr>
<tr class="row-even"><td><p>mr_index</p></td>
<td><p>str</p></td>
<td><p>The ES index for the bot’s reviews &amp; additional context data</p></td>
<td><p>seatech-ltd-91b7d5b9-d071-4da9-ab7d-8302eed441f6-dev-public-mr</p></td>
</tr>
<tr class="row-odd"><td><p>hours</p></td>
<td><p>str</p></td>
<td><p>A formatted string of the business hours</p></td>
<td><p>Monday: 10:00-18:00 Tuesday: 10:00-18:00 Wednesday: 10:00-18:00 Thursday: 10:00-18:00 Friday: 10:00-18:00 Saturday: Closed Sunday: Closed</p></td>
</tr>
<tr class="row-even"><td><p>phone_number</p></td>
<td><p>str</p></td>
<td><p>A formatted string of the business phone number</p></td>
<td><p>02 2716 0550</p></td>
</tr>
<tr class="row-odd"><td><p>address</p></td>
<td><p>str</p></td>
<td><p>A formatted string of the business address</p></td>
<td><p>Rm. 4, 3F., No. 170, Sec. 3, Minquan E. Rd., Songshan District, Taipei City, TW</p></td>
</tr>
<tr class="row-even"><td><p>rating</p></td>
<td><p>float</p></td>
<td><p>The business rating on Google Maps</p></td>
<td><p>4.5</p></td>
</tr>
<tr class="row-odd"><td><p>menu</p></td>
<td><p>str</p></td>
<td><p>A link to a menu if it exists</p></td>
<td><p><a class="reference external" href="https://seasalt.ai/menu">https://seasalt.ai/menu</a></p></td>
</tr>
<tr class="row-even"><td><p>website</p></td>
<td><p>str</p></td>
<td><p>A link to the business website</p></td>
<td><p><a class="reference external" href="https://seasalt.ai">https://seasalt.ai</a></p></td>
</tr>
<tr class="row-odd"><td><p>update_time</p></td>
<td><p>float</p></td>
<td><p>A timestamp of the last time the business info in the nearme_bots table was updated</p></td>
<td><p>1646166762.536154</p></td>
</tr>
<tr class="row-even"><td><p>logo_url</p></td>
<td><p>str</p></td>
<td><p>A url to the business avatar logo</p></td>
<td><p><a class="reference external" href="https://seasalt-cdn.s3.us-west-2.amazonaws.com/Bots/kitten-sanctuary/kitten-3.jpg">https://seasalt-cdn.s3.us-west-2.amazonaws.com/Bots/kitten-sanctuary/kitten-3.jpg</a></p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nearme_bot_architecture.html" class="btn btn-neutral float-left" title="NearMe Bot Architecture &amp; Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nearme_bot_message_routing.html" class="btn btn-neutral float-right" title="NearMe Bot Message Routing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2021, Seasalt.ai.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-10405841-8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-10405841-8', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>